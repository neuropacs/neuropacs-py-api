<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>neuropacs™ Python API</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="header">
      <div class="header-content">
        <div class="header-text">
          <h1>neuropacs™ Python API</h1>
          <p>
            Our Python API enables seamless integration with our product's
            capabilities in any Python-based environment.
          </p>
        </div>
      </div>
    </header>

    <nav class="navbar">
      <ul>
        <li><a href="https://neuropacs.github.io/">Home</a></li>
        <li><a href="#installation">Installation</a></li>
        <li><a href="#usage">Usage</a></li>
        <li><a href="#dicom-web">DICOMweb</a></li>
        <li><a href="#contact">Contact</a></li>
        <li><a href="#license">License</a></li>
        <li><a href="#explore">Explore</a></li>
        <!-- <li><a href="#faq">FAQ</a></li> -->
      </ul>
    </nav>

    <div class="image-row">
      <a href="https://github.com/neuropacs/neuropacs-py-api"
        ><img src="./resources/github_logo.png"
      /></a>
      <a href="https://pypi.org/project/neuropacs/"
        ><img src="./resources/pip_logo.png"
      /></a>
    </div>

    <main class="main-content">
      <section id="installation">
        <h2>Installation</h2>
        <p>Install the neuropacs module using the following command:</p>
        <pre
          class="code-container"
        ><code class="language-shell">pip install neuropacs</code></pre>
      </section>

      <section id="usage">
        <h2>Usage</h2>
        <div class="code-section">
          <h3>Initialization</h3>
          <p>Initialize the neuropacs™ API.</p>
          <pre class="code-container"><code class="language-shell">
  <span class="code-comment"># Import the neuropacs module</span>
  <span class="code-keyword">import</span> neuropacs

  <span class="code-comment"># Define neuropacs parameters</span>
  api_key = <span class="code-string">"your_api_key"</span> <span class="code-comment"># API key</span>
  server_url = <span class="code-string">"server_url"</span> <span class="code-comment"># neuropacs™ serverl URL</span>
  product_name = <span class="code-string">"Atypical/MSAp/PSP-v1.0"</span> <span class="code-comment"># Desired neuropacs™ product</span>
  prediction_format = <span class="code-string">"JSON"</span> <span class="code-comment"># Output format of results ("TXT"/"JSON"/"XML"/"FEATURES")</span>
  qc_format = <span class="code-string">"CSV"</span> <span class="code-comment"># Format of QC results ("CSV"/"TXT"/"JSON")</span>
  origin_type = <span class="code-string">"my_application"</span> <span class="code-comment"># Requestor origin</span>

  <span class="code-comment"># Initialize the API</span>
  npcs = neuropacs.<span class="code-function">init</span>(server_url=server_url, api_key=api_key, origin_type=origin_type)
          </code></pre>
        </div>

        <div class="code-section">
          <h3>Example</h3>
          <p>Working example using the neuropacs™ API.</p>
          <pre class="code-container"><code class="language-python">
  <span class="code-comment"># Create a session</span>
  conn = npcs.<span class="code-function">connect()</span>

  <span class="code-comment"># Create a new order</span>
  order_id = npcs.<span class="code-function">new_job()</span>

  <span class="code-comment"># Upload a dataset from path</span>
  upload = npcs.<span class="code-function">upload_dataset_from_path</span>(
    order_id=order_id, 
    path=<span class="code-string">"/path/to/dataset/"</span>, 
    callback=<span class="code-keyword">lambda</span> data: <span class="code-function">print</span>(data) <span class="code-comment"># optional progress callback</span>
  )

  <span class="code-comment"># Run QC/Compliance check on uploaded dataset (not required)</span>
  qc_results = npcs.<span class="code-function">qc_check</span>(order_id=order_id, format=qc_format)

  <span class="code-comment"># Start an order</span>
  order_start = npcs.<span class="code-function">run_job</span>(order_id=order_id, product_name=product_name)

  <span class="code-comment"># Check order status</span>
  status = npcs.<span class="code-function">check_status</span>(order_id=order_id)

  <span class="code-comment"># Retrieve job results</span>
  results = npcs.<span class="code-function">get_results</span>(order_id=order_id, format=prediction_format)
        </code></pre>
        </div>
    
        <div class="code-section">
        <h3>Example viewing a PNG result</h3>
        <p>Download a PNG result file and view it.</p>
        <pre class="code-container"><code class="language-python">
  <span class="code-comment"># Import pillow</span> 
  <span class="code-keyword">from</span> PIL <span class="code-keyword">import</span> Image

  <span class="code-comment"># Retrieve job results in PNG</span>
  results = npcs.<span class="code-function">get_results</span>(order_id=order_id, format=<span class="code-string">"PNG"</span>)

  <span class="code-comment"># Create an image object from bytes</span>
  image = Image.<span class="code-function">open</span>(results)

  <span class="code-comment"># Display the image</span>
  image.<span class="code-function">show</span>()
            </code></pre>
          </section>
          </div>

      <section id="usage-report">          
        <div class="code-section">
          <h3>API Key Usage Report</h3>
          <p>Generate a structured API key usage report for any neuropacs™ API key. If an admin API key is used. An aggregated report will be created with all keys associated with the same institution. If "email" format is used, an email will be sent to the admin associated with the specified API key.</p>
          <pre class="code-container"><code class="language-python">
  <span class="code-comment"># Define neuropacs parameters</span>
  api_key = <span class="code-string">"your_api_key"</span> <span class="code-comment"># API key</span>
  server_url = <span class="code-string">"server_url"</span> <span class="code-comment"># neuropacs™ serverl URL</span>
  origin_type = <span class="code-string">"my_application"</span> <span class="code-comment"># Requestor origin</span>
  format = <span class="code-string">"JSON"</span> <span class="code-comment"># Format of report ("TXT"/"JSON"/"EMAIL")</span>
  start_date = <span class="code-string">"10/1/2025"</span> <span class="code-comment"># Start date of report (mM/dD/YYYY)</span>
  end_date = <span class="code-string">"12/15/2025"</span> <span class="code-comment"># End date of report (mM/dD/YYYY)</span>

  <span class="code-comment"># Initialize the API</span>
  npcs = neuropacs.<span class="code-function">init</span>(
    server_url=server_url, 
    api_key=api_key, <span class="code-comment"># This API key will used to generate the report</span>
    origin_type=origin_type
  )

  <span class="code-comment"># Create a session</span>
  conn = npcs.<span class="code-function">connect()</span>

  <span class="code-comment"># Generate the report</span>    
  report = npcs.<span class="code-function">get_report</span>(start_date=start_date, end_date=end_date, format=format)
    </code></pre>
      </div></section>

      <section id="dicom-web">          
      <div class="code-section">
        <h3>DICOMweb WADO-RS Integration</h3>
        <p>The API retrieves and processes images directly from DICOMweb WADO-RS servers, enabling neuropacs™ analysis for streamlined diagnostic workflows.</p>
        <pre class="code-container"><code class="language-python">
  <span class="code-comment"># Define DICOMweb parameters</span>
  wado_url = <span class="code-string">"http://localhost:8080/dcm4chee-arc/aets/DCM4CHEE/rs"</span>
  study_uid = <span class="code-string">"1.3.12.2.1107.5.2.32.35162.30000022041820573832300000043"</span>
  username = <span class="code-string">"username"</span>
  password = <span class="code-string">"password"</span>

  <span class="code-comment"># Upload a dataset from DICOMweb</span>
  upload = npcs.<span class="code-function">upload_dataset_from_dicom_web</span>(
    order_id=order_id, 
    wado_url=wado_url, 
    study_uid=study_uid, 
    username=username,
    password=password, 
    callback=<span class="code-keyword">lambda</span> data: <span class="code-function">print</span>(data) <span class="code-comment"># optional progress callback</span>
  )
          </code></pre>
        </div></section>

            </section>
            

      <section id="contact">
        <h2>Contact</h2>
        <p>
          Kerrick Cavanaugh (<em>Lead Software Engineer</em>) -
          kerrick@neuropacs.com
        </p>
      </section>

      <section id="license">
        <h2>License</h2>
        <p>
          This project is licensed under the
          <a
            href="https://github.com/neuropacs/neuropacs-py-api/blob/main/LICENSE"
            target="_blank"
            >MIT</a
          >.
        </p>
      </section>

      <section id="explore">
        <h2>Explore</h2>
        <h3>Integrations</h3>
        <p>
          Explore the different systems and software that our product integrates
          with. Click each integration for detailed setup and usage
          instructions.
        </p>
        <ul class="integration-list">
          <li>
            <a href="https://neuropacs.github.io/SlicerNeuropacs/">3D Slicer</a>
          </li>
          <li>
            <a href="#dicom-web">DICOMweb</a>
          </li>
          <li><a href="https://neuropacs.github.io/neuropacsPyUi/">neuropacsUI</a></li>
        </ul>
        <h3>Supported Programming Languages</h3>
        <p>
          Our product supports various programming languages to offer
          flexibility in development. Click each language for APIs, libraries,
          and examples.
        </p>
        <ul class="language-list">
          <li>
            <a href="https://neuropacs.github.io/neuropacs-js-api/"
              >JavaScript API</a
            >
          </li>
          <li>
            <a href="https://neuropacs.github.io/neuropacs-java-api/"
              >Java API</a
            >
          </li>
          <li>
            <a href="https://neuropacs.github.io/neuropacs-cli/">CLI</a>
          </li>
        </ul>
      </section>

      <!-- <section id="faq">
        <h2>FAQ</h2>
        <p><strong>Q1:</strong> How do I contribute to this project?</p>
        <p>
          <strong>A1:</strong> Fork the repository and submit a pull request.
        </p>
      </section> -->
    </main>

    <footer class="footer">
      <p>&copy; 2025 neuropacs™. All rights reserved.</p>
    </footer>
  </body>
</html>
